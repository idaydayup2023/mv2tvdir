# mv2tvdir

一个Python脚本，用于将电视剧文件（包括视频和字幕）移动到按剧名/季级组织的目录结构中。脚本能够区分电视剧和电影文件，并支持按分辨率和编码过滤文件。

当前版本：v1.0.1

## 功能

- 扫描源目录下的电视剧文件（支持mkv、mp4、avi视频格式和srt、ass、sub字幕格式）
- 区分电视剧和电影文件，只处理电视剧文件
- 支持按分辨率（如1080p、720p）和编码（如x265、x264）过滤文件
- 从文件名中提取剧名和季数信息
- 标准化文件名和目录名，将空格、()、[]等分隔符统一替换为点号(.)
- 按照"剧名/季级/电视剧"的结构创建目标目录
- 将文件移动到对应的目标目录

## 使用方法

```bash
./mv2tvdir.py <源目录> <目标目录> [选项]
```

或者

```bash
python3 mv2tvdir.py <源目录> <目标目录> [选项]
```

### 选项

- `--resolution=<分辨率>`: 只处理指定分辨率的文件 (例如: 1080p, 720p)
- `--codec=<编码>`: 只处理指定编码的文件 (例如: x265, x264)
- `--remove-source`: 在成功移动所有文件后删除源目录
- `--version`: 显示版本信息

### 示例

基本用法：
```bash
./mv2tvdir.py /downloads /media/tv
```

只处理1080p分辨率的文件：
```bash
./mv2tvdir.py /downloads /media/tv --resolution=1080p
```

只处理x265编码的文件：
```bash
./mv2tvdir.py /downloads /media/tv --codec=x265
```

同时指定分辨率和编码：
```bash
./mv2tvdir.py /downloads /media/tv --resolution=1080p --codec=x265
```

移动文件后删除源目录：
```bash
./mv2tvdir.py /downloads /media/tv --remove-source
```

## 文件命名格式

脚本支持的电视剧文件命名格式示例：

- Invasion.2021.S01E01.1080p.x265-ELiTE.mkv
- Breaking.Bad.S05E01.720p.HDTV.x264-IMMERSE.mp4

脚本会从文件名中提取剧名和季数，然后将文件移动到相应的目录中。

## 目录结构

脚本会创建以下目录结构：

```
目标目录/
├── 剧名1.名称/
│   ├── S01/
│   │   ├── 剧名1.名称.S01E01.视频文件
│   │   ├── 剧名1.名称.S01E01.字幕文件
│   │   └── ...
│   └── S02/
│       ├── 剧名1.名称.S02E01.视频文件
│       └── ...
└── 剧名2.名称/
    └── ...
```

## 日志

脚本会输出详细的日志信息，包括：

- 创建的目录
- 移动的文件
- 处理成功和失败的文件数量

## 要求

- Python 3.6+
- 无需额外依赖

## 许可证

本项目采用MIT许可证。详情请参阅[LICENSE](LICENSE)文件。